<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 520" fill="none">
  <defs>
    <linearGradient id="ad-grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#06b6d4;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#3b82f6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:1" />
    </linearGradient>
    <filter id="ad-glow">
      <feGaussianBlur stdDeviation="4" result="blur"/>
      <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
    <filter id="ad-shadow">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#94a3b8" flood-opacity="0.18"/>
    </filter>
    <clipPath id="ad-clip"><rect width="900" height="520" rx="16"/></clipPath>
  </defs>

  <g clip-path="url(#ad-clip)">
    <rect width="900" height="520" fill="#f8fafc" rx="16"/>
    <rect width="900" height="520" fill="none" stroke="#e2e8f0" stroke-width="1" rx="16"/>

    <!-- Grid -->
    <g opacity="0.05" stroke="#94a3b8" stroke-width="0.5">
      <line x1="0" y1="80" x2="900" y2="80"/><line x1="0" y1="160" x2="900" y2="160"/>
      <line x1="0" y1="240" x2="900" y2="240"/><line x1="0" y1="320" x2="900" y2="320"/>
      <line x1="0" y1="400" x2="900" y2="400"/>
    </g>

    <!-- Title -->
    <text x="450" y="38" font-family="system-ui, -apple-system, 'Segoe UI', Helvetica, Arial, sans-serif" font-size="14" font-weight="700" fill="#64748b" letter-spacing="3" text-anchor="middle">HOMEPILOT ARCHITECTURE</text>

    <!-- USER Layer -->
    <g transform="translate(450, 85)" filter="url(#ad-shadow)">
      <rect x="-60" y="-22" width="120" height="44" rx="10" fill="#fff" stroke="#06b6d4" stroke-width="1.5"/>
      <circle cx="-25" cy="0" r="10" fill="#06b6d4" opacity="0.1"/>
      <text x="-25" y="4" font-family="system-ui, sans-serif" font-size="12" text-anchor="middle" fill="#06b6d4"></text>
      <text x="15" y="5" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#1e293b">You</text>
    </g>

    <!-- Arrow down -->
    <line x1="450" y1="107" x2="450" y2="135" stroke="#06b6d4" stroke-width="1.5" opacity="0.4"/>
    <polygon points="445,132 455,132 450,140" fill="#06b6d4" opacity="0.6"/>

    <!-- FRONTEND Layer -->
    <g transform="translate(450, 163)" filter="url(#ad-shadow)">
      <rect x="-100" y="-22" width="200" height="44" rx="10" fill="#fff" stroke="#06b6d4" stroke-width="1.5"/>
      <text x="-70" y="5" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#1e293b">React Frontend</text>
      <text x="70" y="5" font-family="system-ui, sans-serif" font-size="10" fill="#94a3b8">:3000</text>
    </g>

    <!-- Arrow down -->
    <line x1="450" y1="185" x2="450" y2="213" stroke="#3b82f6" stroke-width="1.5" opacity="0.4"/>
    <polygon points="445,210 455,210 450,218" fill="#3b82f6" opacity="0.6"/>

    <!-- BACKEND Layer (central) -->
    <g transform="translate(450, 245)" filter="url(#ad-glow)">
      <rect x="-110" y="-25" width="220" height="50" rx="12" fill="#fff" stroke="url(#ad-grad)" stroke-width="2"/>
      <text x="-75" y="6" font-family="system-ui, sans-serif" font-size="13" font-weight="700" fill="url(#ad-grad)">FastAPI Backend</text>
      <text x="80" y="6" font-family="system-ui, sans-serif" font-size="10" fill="#94a3b8">:8000</text>
      <!-- Animated pulse -->
      <rect x="-110" y="-25" width="220" height="50" rx="12" stroke="url(#ad-grad)" stroke-width="1" fill="none" opacity="0">
        <animate attributeName="opacity" values="0;0.3;0" dur="3s" repeatCount="indefinite"/>
      </rect>
    </g>

    <!-- SERVICE BOXES - Row 1 (connected to backend) -->

    <!-- LLM Provider -->
    <g transform="translate(100, 370)" filter="url(#ad-shadow)">
      <rect x="-70" y="-28" width="140" height="56" rx="10" fill="#fff" stroke="#06b6d4" stroke-width="1"/>
      <text x="0" y="-8" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#0891b2" text-anchor="middle">LLM Provider</text>
      <text x="0" y="8" font-family="system-ui, sans-serif" font-size="9" fill="#94a3b8" text-anchor="middle">Ollama :11434</text>
      <text x="0" y="20" font-family="system-ui, sans-serif" font-size="8" fill="#64748b" text-anchor="middle">OpenAI 路 Claude 路 watsonx</text>
    </g>
    <line x1="100" y1="342" x2="380" y2="270" stroke="#06b6d4" stroke-width="1" opacity="0.3"/>

    <!-- ComfyUI -->
    <g transform="translate(280, 370)" filter="url(#ad-shadow)">
      <rect x="-70" y="-28" width="140" height="56" rx="10" fill="#fff" stroke="#3b82f6" stroke-width="1"/>
      <text x="0" y="-8" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#2563eb" text-anchor="middle">ComfyUI</text>
      <text x="0" y="8" font-family="system-ui, sans-serif" font-size="9" fill="#94a3b8" text-anchor="middle">:8188</text>
      <text x="0" y="20" font-family="system-ui, sans-serif" font-size="8" fill="#64748b" text-anchor="middle">20 workflows 路 Image 路 Video</text>
    </g>
    <line x1="280" y1="342" x2="410" y2="270" stroke="#3b82f6" stroke-width="1" opacity="0.3"/>

    <!-- Storage -->
    <g transform="translate(450, 370)" filter="url(#ad-shadow)">
      <rect x="-65" y="-28" width="130" height="56" rx="10" fill="#fff" stroke="#6366f1" stroke-width="1"/>
      <text x="0" y="-8" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#818cf8" text-anchor="middle">Storage</text>
      <text x="0" y="8" font-family="system-ui, sans-serif" font-size="9" fill="#94a3b8" text-anchor="middle">SQLite + ChromaDB</text>
      <text x="0" y="20" font-family="system-ui, sans-serif" font-size="8" fill="#64748b" text-anchor="middle">Metadata 路 Memory 路 RAG</text>
    </g>
    <line x1="450" y1="342" x2="450" y2="270" stroke="#6366f1" stroke-width="1" opacity="0.3"/>

    <!-- Media Service -->
    <g transform="translate(620, 370)" filter="url(#ad-shadow)">
      <rect x="-65" y="-28" width="130" height="56" rx="10" fill="#fff" stroke="#8b5cf6" stroke-width="1"/>
      <text x="0" y="-8" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#a78bfa" text-anchor="middle">Media Service</text>
      <text x="0" y="8" font-family="system-ui, sans-serif" font-size="9" fill="#94a3b8" text-anchor="middle">:8002</text>
      <text x="0" y="20" font-family="system-ui, sans-serif" font-size="8" fill="#64748b" text-anchor="middle">Processing 路 Export</text>
    </g>
    <line x1="620" y1="342" x2="490" y2="270" stroke="#8b5cf6" stroke-width="1" opacity="0.3"/>

    <!-- MCP Gateway -->
    <g transform="translate(790, 345)" filter="url(#ad-glow)">
      <rect x="-80" y="-30" width="160" height="60" rx="10" fill="#fff" stroke="url(#ad-grad)" stroke-width="1.5"/>
      <text x="0" y="-8" font-family="system-ui, sans-serif" font-size="11" font-weight="700" fill="url(#ad-grad)" text-anchor="middle">MCP Gateway</text>
      <text x="0" y="8" font-family="system-ui, sans-serif" font-size="9" fill="#94a3b8" text-anchor="middle">Context Forge :4444</text>
      <text x="0" y="22" font-family="system-ui, sans-serif" font-size="8" fill="#64748b" text-anchor="middle">5 Tools 路 2 A2A Agents</text>
    </g>
    <line x1="750" y1="325" x2="520" y2="265" stroke="url(#ad-grad)" stroke-width="1.2" opacity="0.4"/>

    <!-- MCP sub-services -->
    <g transform="translate(790, 450)" filter="url(#ad-shadow)">
      <!-- Tool servers -->
      <rect x="-80" y="-18" width="72" height="36" rx="6" fill="#fff" stroke="#06b6d4" stroke-width="0.8"/>
      <text x="-44" y="-2" font-family="system-ui, sans-serif" font-size="8" font-weight="600" fill="#0891b2" text-anchor="middle">Tools</text>
      <text x="-44" y="10" font-family="system-ui, sans-serif" font-size="7" fill="#64748b" text-anchor="middle">:9101-9105</text>

      <!-- A2A agents -->
      <rect x="8" y="-18" width="72" height="36" rx="6" fill="#fff" stroke="#8b5cf6" stroke-width="0.8"/>
      <text x="44" y="-2" font-family="system-ui, sans-serif" font-size="8" font-weight="600" fill="#a78bfa" text-anchor="middle">A2A</text>
      <text x="44" y="10" font-family="system-ui, sans-serif" font-size="7" fill="#64748b" text-anchor="middle">:9201-9202</text>

      <!-- Lines up to MCP Gateway -->
      <line x1="-44" y1="-18" x2="-30" y2="-57" stroke="#06b6d4" stroke-width="0.8" opacity="0.3"/>
      <line x1="44" y1="-18" x2="30" y2="-57" stroke="#8b5cf6" stroke-width="0.8" opacity="0.3"/>
    </g>

    <!-- Animated data flow dots -->
    <circle r="2.5" fill="#06b6d4" opacity="0">
      <animateMotion dur="2s" repeatCount="indefinite" path="M450 107 L450 135"/>
      <animate attributeName="opacity" values="0;0.8;0" dur="2s" repeatCount="indefinite"/>
    </circle>
    <circle r="2.5" fill="#3b82f6" opacity="0">
      <animateMotion dur="2.5s" repeatCount="indefinite" path="M450 185 L450 220"/>
      <animate attributeName="opacity" values="0;0.8;0" dur="2.5s" repeatCount="indefinite"/>
    </circle>

    <!-- Bottom bar -->
    <rect x="30" y="490" width="840" height="2" rx="1" fill="url(#ad-grad)" opacity="0.15"/>
    <text x="450" y="510" font-family="system-ui, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">160+ API endpoints 路 Full OpenAPI docs at /docs 路 Everything Docker-orchestrated 路 Zero external telemetry</text>
  </g>
</svg>