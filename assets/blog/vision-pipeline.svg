<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 300" fill="none">
  <defs>
    <style>
      @keyframes vp-flow { 0%{stroke-dashoffset:16} 100%{stroke-dashoffset:0} }
      @keyframes vp-pulse { 0%,100%{opacity:0.5} 50%{opacity:1} }
      @keyframes vp-scan { 0%{y:40} 50%{y:100} 100%{y:40} }
      .vp-flow { stroke-dasharray: 8 8; animation: vp-flow 1.5s linear infinite; }
      .vp-pulse { animation: vp-pulse 2.5s ease-in-out infinite; }
    </style>
    <linearGradient id="vp-bg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f0f23"/><stop offset="100%" style="stop-color:#1a1a3e"/>
    </linearGradient>
    <linearGradient id="vp-accent" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#ec4899"/><stop offset="50%" style="stop-color:#8b5cf6"/><stop offset="100%" style="stop-color:#3b82f6"/>
    </linearGradient>
    <filter id="vp-glow"><feGaussianBlur stdDeviation="4" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
    <clipPath id="vp-clip"><rect width="900" height="300" rx="16"/></clipPath>
  </defs>
  <g clip-path="url(#vp-clip)">
    <rect width="900" height="300" fill="url(#vp-bg)" rx="16"/>

    <!-- Title -->
    <text x="450" y="30" font-family="system-ui,-apple-system,'Segoe UI',Helvetica,Arial,sans-serif" font-size="13" font-weight="700" fill="#94a3b8" letter-spacing="3" text-anchor="middle">VISION PIPELINE</text>
    <text x="450" y="48" font-family="system-ui,sans-serif" font-size="11" fill="#64748b" text-anchor="middle">Upload → Local Vision Model → Main LLM → Grounded Response</text>

    <!-- Step 1: Upload -->
    <g transform="translate(50,80)" filter="url(#vp-glow)">
      <rect x="0" y="0" width="140" height="120" rx="12" fill="#1e293b" stroke="#ec4899" stroke-width="1.5"/>
      <rect x="20" y="20" width="100" height="60" rx="6" fill="#0f172a" stroke="#ec4899" stroke-width="0.5" opacity="0.4"/>
      <!-- Image placeholder with scan line -->
      <text x="70" y="56" font-family="system-ui,sans-serif" font-size="24" fill="#ec4899" text-anchor="middle" opacity="0.4">&#128444;</text>
      <line x1="25" y1="50" x2="115" y2="50" stroke="#ec4899" stroke-width="0.5" opacity="0.6">
        <animate attributeName="y1" values="25;75;25" dur="2s" repeatCount="indefinite"/>
        <animate attributeName="y2" values="25;75;25" dur="2s" repeatCount="indefinite"/>
      </line>
      <text x="70" y="98" font-family="system-ui,sans-serif" font-size="10" font-weight="600" fill="#f9a8d4" text-anchor="middle">Upload Image</text>
      <text x="70" y="112" font-family="system-ui,sans-serif" font-size="8" fill="#64748b" text-anchor="middle">PNG, JPG, WebP, GIF</text>
    </g>

    <!-- Arrow 1 -->
    <line x1="195" y1="140" x2="265" y2="140" stroke="#ec4899" stroke-width="1.5" class="vp-flow"/>
    <polygon points="262,135 272,140 262,145" fill="#ec4899" opacity="0.7"/>

    <!-- Step 2: Vision Model -->
    <g transform="translate(275,80)" filter="url(#vp-glow)">
      <rect x="0" y="0" width="175" height="120" rx="12" fill="#1e293b" stroke="#8b5cf6" stroke-width="1.5"/>
      <text x="88" y="30" font-family="system-ui,sans-serif" font-size="11" font-weight="700" fill="#c4b5fd" text-anchor="middle">Vision Model</text>
      <text x="88" y="48" font-family="system-ui,sans-serif" font-size="9" fill="#64748b" text-anchor="middle">moondream / llava (local)</text>
      <rect x="15" y="58" width="145" height="48" rx="6" fill="#0f172a"/>
      <text x="88" y="76" font-family="system-ui,sans-serif" font-size="8" fill="#c4b5fd" text-anchor="middle" class="vp-pulse">Analyzing image...</text>
      <text x="88" y="92" font-family="system-ui,sans-serif" font-size="7" fill="#64748b" text-anchor="middle">Caption + OCR + Description</text>
    </g>

    <!-- Arrow 2 -->
    <line x1="455" y1="140" x2="525" y2="140" stroke="#8b5cf6" stroke-width="1.5" class="vp-flow" style="animation-delay:0.3s"/>
    <polygon points="522,135 532,140 522,145" fill="#8b5cf6" opacity="0.7"/>

    <!-- Step 3: Main LLM -->
    <g transform="translate(535,80)" filter="url(#vp-glow)">
      <rect x="0" y="0" width="155" height="120" rx="12" fill="#1e293b" stroke="#3b82f6" stroke-width="1.5"/>
      <text x="78" y="30" font-family="system-ui,sans-serif" font-size="11" font-weight="700" fill="#93c5fd" text-anchor="middle">Main LLM</text>
      <text x="78" y="48" font-family="system-ui,sans-serif" font-size="9" fill="#64748b" text-anchor="middle">llama / mistral / etc.</text>
      <rect x="15" y="58" width="125" height="48" rx="6" fill="#0f172a"/>
      <text x="78" y="76" font-family="system-ui,sans-serif" font-size="8" fill="#93c5fd" text-anchor="middle">Image context +</text>
      <text x="78" y="90" font-family="system-ui,sans-serif" font-size="8" fill="#93c5fd" text-anchor="middle">user question</text>
    </g>

    <!-- Arrow 3 -->
    <line x1="695" y1="140" x2="745" y2="140" stroke="#3b82f6" stroke-width="1.5" class="vp-flow" style="animation-delay:0.6s"/>
    <polygon points="742,135 752,140 742,145" fill="#3b82f6" opacity="0.7"/>

    <!-- Step 4: Response -->
    <g transform="translate(755,95)" filter="url(#vp-glow)">
      <rect x="0" y="0" width="110" height="90" rx="12" fill="#1e293b" stroke="#10b981" stroke-width="1.5"/>
      <text x="55" y="28" font-family="system-ui,sans-serif" font-size="11" font-weight="700" fill="#6ee7b7" text-anchor="middle">Response</text>
      <text x="55" y="48" font-family="system-ui,sans-serif" font-size="8" fill="#64748b" text-anchor="middle">Grounded answer</text>
      <text x="55" y="62" font-family="system-ui,sans-serif" font-size="8" fill="#64748b" text-anchor="middle">about your image</text>
      <circle cx="55" cy="78" r="4" fill="#10b981" opacity="0.5">
        <animate attributeName="opacity" values="0.3;0.8;0.3" dur="2s" repeatCount="indefinite"/>
      </circle>
    </g>

    <!-- Trigger modes (bottom) -->
    <g transform="translate(130,230)">
      <text x="0" y="0" font-family="system-ui,sans-serif" font-size="10" font-weight="600" fill="#94a3b8">Trigger modes:</text>
      <rect x="120" y="-13" width="110" height="22" rx="6" fill="#ec4899" opacity="0.12"/>
      <text x="175" y="3" font-family="system-ui,sans-serif" font-size="9" fill="#f9a8d4" text-anchor="middle">Image upload</text>
      <rect x="240" y="-13" width="140" height="22" rx="6" fill="#8b5cf6" opacity="0.12"/>
      <text x="310" y="3" font-family="system-ui,sans-serif" font-size="9" fill="#c4b5fd" text-anchor="middle">Drag &amp; drop / paste</text>
      <rect x="390" y="-13" width="180" height="22" rx="6" fill="#3b82f6" opacity="0.12"/>
      <text x="480" y="3" font-family="system-ui,sans-serif" font-size="9" fill="#93c5fd" text-anchor="middle">Text intent ("describe this")</text>
    </g>

    <!-- Bottom tagline -->
    <text x="450" y="280" font-family="system-ui,sans-serif" font-size="10" fill="#475569" text-anchor="middle">100% local processing — no images leave your machine — works with any Ollama vision model</text>
  </g>
</svg>