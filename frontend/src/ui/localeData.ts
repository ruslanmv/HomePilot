/**
 * localeData.ts — Enterprise-grade locale data for Profile settings.
 *
 * Provides:
 *   - Full ISO 3166-1 country list (name + alpha-2 code)
 *   - Common languages (ISO 639-1)
 *   - Country → IANA timezone mapping
 *   - System timezone detection helper
 */

// ---------------------------------------------------------------------------
// Countries (ISO 3166-1 alpha-2, sorted by name)
// ---------------------------------------------------------------------------
export const COUNTRIES: { code: string; name: string }[] = [
  { code: 'AF', name: 'Afghanistan' },
  { code: 'AL', name: 'Albania' },
  { code: 'DZ', name: 'Algeria' },
  { code: 'AS', name: 'American Samoa' },
  { code: 'AD', name: 'Andorra' },
  { code: 'AO', name: 'Angola' },
  { code: 'AG', name: 'Antigua and Barbuda' },
  { code: 'AR', name: 'Argentina' },
  { code: 'AM', name: 'Armenia' },
  { code: 'AU', name: 'Australia' },
  { code: 'AT', name: 'Austria' },
  { code: 'AZ', name: 'Azerbaijan' },
  { code: 'BS', name: 'Bahamas' },
  { code: 'BH', name: 'Bahrain' },
  { code: 'BD', name: 'Bangladesh' },
  { code: 'BB', name: 'Barbados' },
  { code: 'BY', name: 'Belarus' },
  { code: 'BE', name: 'Belgium' },
  { code: 'BZ', name: 'Belize' },
  { code: 'BJ', name: 'Benin' },
  { code: 'BT', name: 'Bhutan' },
  { code: 'BO', name: 'Bolivia' },
  { code: 'BA', name: 'Bosnia and Herzegovina' },
  { code: 'BW', name: 'Botswana' },
  { code: 'BR', name: 'Brazil' },
  { code: 'BN', name: 'Brunei' },
  { code: 'BG', name: 'Bulgaria' },
  { code: 'BF', name: 'Burkina Faso' },
  { code: 'BI', name: 'Burundi' },
  { code: 'CV', name: 'Cabo Verde' },
  { code: 'KH', name: 'Cambodia' },
  { code: 'CM', name: 'Cameroon' },
  { code: 'CA', name: 'Canada' },
  { code: 'CF', name: 'Central African Republic' },
  { code: 'TD', name: 'Chad' },
  { code: 'CL', name: 'Chile' },
  { code: 'CN', name: 'China' },
  { code: 'CO', name: 'Colombia' },
  { code: 'KM', name: 'Comoros' },
  { code: 'CG', name: 'Congo' },
  { code: 'CD', name: 'Congo (DRC)' },
  { code: 'CR', name: 'Costa Rica' },
  { code: 'CI', name: "Côte d'Ivoire" },
  { code: 'HR', name: 'Croatia' },
  { code: 'CU', name: 'Cuba' },
  { code: 'CY', name: 'Cyprus' },
  { code: 'CZ', name: 'Czech Republic' },
  { code: 'DK', name: 'Denmark' },
  { code: 'DJ', name: 'Djibouti' },
  { code: 'DM', name: 'Dominica' },
  { code: 'DO', name: 'Dominican Republic' },
  { code: 'EC', name: 'Ecuador' },
  { code: 'EG', name: 'Egypt' },
  { code: 'SV', name: 'El Salvador' },
  { code: 'GQ', name: 'Equatorial Guinea' },
  { code: 'ER', name: 'Eritrea' },
  { code: 'EE', name: 'Estonia' },
  { code: 'SZ', name: 'Eswatini' },
  { code: 'ET', name: 'Ethiopia' },
  { code: 'FJ', name: 'Fiji' },
  { code: 'FI', name: 'Finland' },
  { code: 'FR', name: 'France' },
  { code: 'GA', name: 'Gabon' },
  { code: 'GM', name: 'Gambia' },
  { code: 'GE', name: 'Georgia' },
  { code: 'DE', name: 'Germany' },
  { code: 'GH', name: 'Ghana' },
  { code: 'GR', name: 'Greece' },
  { code: 'GD', name: 'Grenada' },
  { code: 'GT', name: 'Guatemala' },
  { code: 'GN', name: 'Guinea' },
  { code: 'GW', name: 'Guinea-Bissau' },
  { code: 'GY', name: 'Guyana' },
  { code: 'HT', name: 'Haiti' },
  { code: 'HN', name: 'Honduras' },
  { code: 'HK', name: 'Hong Kong' },
  { code: 'HU', name: 'Hungary' },
  { code: 'IS', name: 'Iceland' },
  { code: 'IN', name: 'India' },
  { code: 'ID', name: 'Indonesia' },
  { code: 'IR', name: 'Iran' },
  { code: 'IQ', name: 'Iraq' },
  { code: 'IE', name: 'Ireland' },
  { code: 'IL', name: 'Israel' },
  { code: 'IT', name: 'Italy' },
  { code: 'JM', name: 'Jamaica' },
  { code: 'JP', name: 'Japan' },
  { code: 'JO', name: 'Jordan' },
  { code: 'KZ', name: 'Kazakhstan' },
  { code: 'KE', name: 'Kenya' },
  { code: 'KI', name: 'Kiribati' },
  { code: 'KP', name: 'Korea (North)' },
  { code: 'KR', name: 'Korea (South)' },
  { code: 'KW', name: 'Kuwait' },
  { code: 'KG', name: 'Kyrgyzstan' },
  { code: 'LA', name: 'Laos' },
  { code: 'LV', name: 'Latvia' },
  { code: 'LB', name: 'Lebanon' },
  { code: 'LS', name: 'Lesotho' },
  { code: 'LR', name: 'Liberia' },
  { code: 'LY', name: 'Libya' },
  { code: 'LI', name: 'Liechtenstein' },
  { code: 'LT', name: 'Lithuania' },
  { code: 'LU', name: 'Luxembourg' },
  { code: 'MO', name: 'Macao' },
  { code: 'MG', name: 'Madagascar' },
  { code: 'MW', name: 'Malawi' },
  { code: 'MY', name: 'Malaysia' },
  { code: 'MV', name: 'Maldives' },
  { code: 'ML', name: 'Mali' },
  { code: 'MT', name: 'Malta' },
  { code: 'MH', name: 'Marshall Islands' },
  { code: 'MR', name: 'Mauritania' },
  { code: 'MU', name: 'Mauritius' },
  { code: 'MX', name: 'Mexico' },
  { code: 'FM', name: 'Micronesia' },
  { code: 'MD', name: 'Moldova' },
  { code: 'MC', name: 'Monaco' },
  { code: 'MN', name: 'Mongolia' },
  { code: 'ME', name: 'Montenegro' },
  { code: 'MA', name: 'Morocco' },
  { code: 'MZ', name: 'Mozambique' },
  { code: 'MM', name: 'Myanmar' },
  { code: 'NA', name: 'Namibia' },
  { code: 'NR', name: 'Nauru' },
  { code: 'NP', name: 'Nepal' },
  { code: 'NL', name: 'Netherlands' },
  { code: 'NZ', name: 'New Zealand' },
  { code: 'NI', name: 'Nicaragua' },
  { code: 'NE', name: 'Niger' },
  { code: 'NG', name: 'Nigeria' },
  { code: 'MK', name: 'North Macedonia' },
  { code: 'NO', name: 'Norway' },
  { code: 'OM', name: 'Oman' },
  { code: 'PK', name: 'Pakistan' },
  { code: 'PW', name: 'Palau' },
  { code: 'PS', name: 'Palestine' },
  { code: 'PA', name: 'Panama' },
  { code: 'PG', name: 'Papua New Guinea' },
  { code: 'PY', name: 'Paraguay' },
  { code: 'PE', name: 'Peru' },
  { code: 'PH', name: 'Philippines' },
  { code: 'PL', name: 'Poland' },
  { code: 'PT', name: 'Portugal' },
  { code: 'PR', name: 'Puerto Rico' },
  { code: 'QA', name: 'Qatar' },
  { code: 'RO', name: 'Romania' },
  { code: 'RU', name: 'Russia' },
  { code: 'RW', name: 'Rwanda' },
  { code: 'KN', name: 'Saint Kitts and Nevis' },
  { code: 'LC', name: 'Saint Lucia' },
  { code: 'VC', name: 'Saint Vincent and the Grenadines' },
  { code: 'WS', name: 'Samoa' },
  { code: 'SM', name: 'San Marino' },
  { code: 'ST', name: 'São Tomé and Príncipe' },
  { code: 'SA', name: 'Saudi Arabia' },
  { code: 'SN', name: 'Senegal' },
  { code: 'RS', name: 'Serbia' },
  { code: 'SC', name: 'Seychelles' },
  { code: 'SL', name: 'Sierra Leone' },
  { code: 'SG', name: 'Singapore' },
  { code: 'SK', name: 'Slovakia' },
  { code: 'SI', name: 'Slovenia' },
  { code: 'SB', name: 'Solomon Islands' },
  { code: 'SO', name: 'Somalia' },
  { code: 'ZA', name: 'South Africa' },
  { code: 'SS', name: 'South Sudan' },
  { code: 'ES', name: 'Spain' },
  { code: 'LK', name: 'Sri Lanka' },
  { code: 'SD', name: 'Sudan' },
  { code: 'SR', name: 'Suriname' },
  { code: 'SE', name: 'Sweden' },
  { code: 'CH', name: 'Switzerland' },
  { code: 'SY', name: 'Syria' },
  { code: 'TW', name: 'Taiwan' },
  { code: 'TJ', name: 'Tajikistan' },
  { code: 'TZ', name: 'Tanzania' },
  { code: 'TH', name: 'Thailand' },
  { code: 'TL', name: 'Timor-Leste' },
  { code: 'TG', name: 'Togo' },
  { code: 'TO', name: 'Tonga' },
  { code: 'TT', name: 'Trinidad and Tobago' },
  { code: 'TN', name: 'Tunisia' },
  { code: 'TR', name: 'Turkey' },
  { code: 'TM', name: 'Turkmenistan' },
  { code: 'TV', name: 'Tuvalu' },
  { code: 'UG', name: 'Uganda' },
  { code: 'UA', name: 'Ukraine' },
  { code: 'AE', name: 'United Arab Emirates' },
  { code: 'GB', name: 'United Kingdom' },
  { code: 'US', name: 'United States' },
  { code: 'UY', name: 'Uruguay' },
  { code: 'UZ', name: 'Uzbekistan' },
  { code: 'VU', name: 'Vanuatu' },
  { code: 'VA', name: 'Vatican City' },
  { code: 'VE', name: 'Venezuela' },
  { code: 'VN', name: 'Vietnam' },
  { code: 'YE', name: 'Yemen' },
  { code: 'ZM', name: 'Zambia' },
  { code: 'ZW', name: 'Zimbabwe' },
]

// ---------------------------------------------------------------------------
// Languages (ISO 639-1, common set)
// ---------------------------------------------------------------------------
export const LANGUAGES: { code: string; name: string }[] = [
  { code: 'af', name: 'Afrikaans' },
  { code: 'ar', name: 'Arabic' },
  { code: 'bg', name: 'Bulgarian' },
  { code: 'bn', name: 'Bengali' },
  { code: 'ca', name: 'Catalan' },
  { code: 'cs', name: 'Czech' },
  { code: 'cy', name: 'Welsh' },
  { code: 'da', name: 'Danish' },
  { code: 'de', name: 'German' },
  { code: 'el', name: 'Greek' },
  { code: 'en', name: 'English' },
  { code: 'es', name: 'Spanish' },
  { code: 'et', name: 'Estonian' },
  { code: 'fa', name: 'Persian' },
  { code: 'fi', name: 'Finnish' },
  { code: 'fil', name: 'Filipino' },
  { code: 'fr', name: 'French' },
  { code: 'ga', name: 'Irish' },
  { code: 'he', name: 'Hebrew' },
  { code: 'hi', name: 'Hindi' },
  { code: 'hr', name: 'Croatian' },
  { code: 'hu', name: 'Hungarian' },
  { code: 'id', name: 'Indonesian' },
  { code: 'is', name: 'Icelandic' },
  { code: 'it', name: 'Italian' },
  { code: 'ja', name: 'Japanese' },
  { code: 'ka', name: 'Georgian' },
  { code: 'kk', name: 'Kazakh' },
  { code: 'km', name: 'Khmer' },
  { code: 'kn', name: 'Kannada' },
  { code: 'ko', name: 'Korean' },
  { code: 'lt', name: 'Lithuanian' },
  { code: 'lv', name: 'Latvian' },
  { code: 'mk', name: 'Macedonian' },
  { code: 'ml', name: 'Malayalam' },
  { code: 'mn', name: 'Mongolian' },
  { code: 'mr', name: 'Marathi' },
  { code: 'ms', name: 'Malay' },
  { code: 'my', name: 'Burmese' },
  { code: 'nb', name: 'Norwegian Bokmål' },
  { code: 'ne', name: 'Nepali' },
  { code: 'nl', name: 'Dutch' },
  { code: 'pl', name: 'Polish' },
  { code: 'pt', name: 'Portuguese' },
  { code: 'ro', name: 'Romanian' },
  { code: 'ru', name: 'Russian' },
  { code: 'si', name: 'Sinhala' },
  { code: 'sk', name: 'Slovak' },
  { code: 'sl', name: 'Slovenian' },
  { code: 'sq', name: 'Albanian' },
  { code: 'sr', name: 'Serbian' },
  { code: 'sv', name: 'Swedish' },
  { code: 'sw', name: 'Swahili' },
  { code: 'ta', name: 'Tamil' },
  { code: 'te', name: 'Telugu' },
  { code: 'th', name: 'Thai' },
  { code: 'tr', name: 'Turkish' },
  { code: 'uk', name: 'Ukrainian' },
  { code: 'ur', name: 'Urdu' },
  { code: 'uz', name: 'Uzbek' },
  { code: 'vi', name: 'Vietnamese' },
  { code: 'zh', name: 'Chinese (Simplified)' },
  { code: 'zh-TW', name: 'Chinese (Traditional)' },
]

// ---------------------------------------------------------------------------
// Country → IANA timezone mapping
// ---------------------------------------------------------------------------
export const COUNTRY_TIMEZONES: Record<string, string[]> = {
  AF: ['Asia/Kabul'],
  AL: ['Europe/Tirane'],
  DZ: ['Africa/Algiers'],
  AS: ['Pacific/Pago_Pago'],
  AD: ['Europe/Andorra'],
  AO: ['Africa/Luanda'],
  AG: ['America/Antigua'],
  AR: ['America/Argentina/Buenos_Aires', 'America/Argentina/Cordoba', 'America/Argentina/Mendoza'],
  AM: ['Asia/Yerevan'],
  AU: ['Australia/Sydney', 'Australia/Melbourne', 'Australia/Brisbane', 'Australia/Perth', 'Australia/Adelaide', 'Australia/Darwin', 'Australia/Hobart'],
  AT: ['Europe/Vienna'],
  AZ: ['Asia/Baku'],
  BS: ['America/Nassau'],
  BH: ['Asia/Bahrain'],
  BD: ['Asia/Dhaka'],
  BB: ['America/Barbados'],
  BY: ['Europe/Minsk'],
  BE: ['Europe/Brussels'],
  BZ: ['America/Belize'],
  BJ: ['Africa/Porto-Novo'],
  BT: ['Asia/Thimphu'],
  BO: ['America/La_Paz'],
  BA: ['Europe/Sarajevo'],
  BW: ['Africa/Gaborone'],
  BR: ['America/Sao_Paulo', 'America/Manaus', 'America/Recife', 'America/Fortaleza', 'America/Belem', 'America/Cuiaba'],
  BN: ['Asia/Brunei'],
  BG: ['Europe/Sofia'],
  BF: ['Africa/Ouagadougou'],
  BI: ['Africa/Bujumbura'],
  CV: ['Atlantic/Cape_Verde'],
  KH: ['Asia/Phnom_Penh'],
  CM: ['Africa/Douala'],
  CA: ['America/Toronto', 'America/Vancouver', 'America/Edmonton', 'America/Winnipeg', 'America/Halifax', 'America/St_Johns', 'America/Regina'],
  CF: ['Africa/Bangui'],
  TD: ['Africa/Ndjamena'],
  CL: ['America/Santiago', 'Pacific/Easter'],
  CN: ['Asia/Shanghai', 'Asia/Urumqi'],
  CO: ['America/Bogota'],
  KM: ['Indian/Comoro'],
  CG: ['Africa/Brazzaville'],
  CD: ['Africa/Kinshasa', 'Africa/Lubumbashi'],
  CR: ['America/Costa_Rica'],
  CI: ['Africa/Abidjan'],
  HR: ['Europe/Zagreb'],
  CU: ['America/Havana'],
  CY: ['Asia/Nicosia'],
  CZ: ['Europe/Prague'],
  DK: ['Europe/Copenhagen'],
  DJ: ['Africa/Djibouti'],
  DM: ['America/Dominica'],
  DO: ['America/Santo_Domingo'],
  EC: ['America/Guayaquil', 'Pacific/Galapagos'],
  EG: ['Africa/Cairo'],
  SV: ['America/El_Salvador'],
  GQ: ['Africa/Malabo'],
  ER: ['Africa/Asmara'],
  EE: ['Europe/Tallinn'],
  SZ: ['Africa/Mbabane'],
  ET: ['Africa/Addis_Ababa'],
  FJ: ['Pacific/Fiji'],
  FI: ['Europe/Helsinki'],
  FR: ['Europe/Paris'],
  GA: ['Africa/Libreville'],
  GM: ['Africa/Banjul'],
  GE: ['Asia/Tbilisi'],
  DE: ['Europe/Berlin'],
  GH: ['Africa/Accra'],
  GR: ['Europe/Athens'],
  GD: ['America/Grenada'],
  GT: ['America/Guatemala'],
  GN: ['Africa/Conakry'],
  GW: ['Africa/Bissau'],
  GY: ['America/Guyana'],
  HT: ['America/Port-au-Prince'],
  HN: ['America/Tegucigalpa'],
  HK: ['Asia/Hong_Kong'],
  HU: ['Europe/Budapest'],
  IS: ['Atlantic/Reykjavik'],
  IN: ['Asia/Kolkata'],
  ID: ['Asia/Jakarta', 'Asia/Makassar', 'Asia/Jayapura'],
  IR: ['Asia/Tehran'],
  IQ: ['Asia/Baghdad'],
  IE: ['Europe/Dublin'],
  IL: ['Asia/Jerusalem'],
  IT: ['Europe/Rome'],
  JM: ['America/Jamaica'],
  JP: ['Asia/Tokyo'],
  JO: ['Asia/Amman'],
  KZ: ['Asia/Almaty', 'Asia/Aqtobe', 'Asia/Atyrau'],
  KE: ['Africa/Nairobi'],
  KI: ['Pacific/Tarawa'],
  KP: ['Asia/Pyongyang'],
  KR: ['Asia/Seoul'],
  KW: ['Asia/Kuwait'],
  KG: ['Asia/Bishkek'],
  LA: ['Asia/Vientiane'],
  LV: ['Europe/Riga'],
  LB: ['Asia/Beirut'],
  LS: ['Africa/Maseru'],
  LR: ['Africa/Monrovia'],
  LY: ['Africa/Tripoli'],
  LI: ['Europe/Vaduz'],
  LT: ['Europe/Vilnius'],
  LU: ['Europe/Luxembourg'],
  MO: ['Asia/Macau'],
  MG: ['Indian/Antananarivo'],
  MW: ['Africa/Blantyre'],
  MY: ['Asia/Kuala_Lumpur'],
  MV: ['Indian/Maldives'],
  ML: ['Africa/Bamako'],
  MT: ['Europe/Malta'],
  MH: ['Pacific/Majuro'],
  MR: ['Africa/Nouakchott'],
  MU: ['Indian/Mauritius'],
  MX: ['America/Mexico_City', 'America/Cancun', 'America/Monterrey', 'America/Tijuana', 'America/Chihuahua'],
  FM: ['Pacific/Chuuk'],
  MD: ['Europe/Chisinau'],
  MC: ['Europe/Monaco'],
  MN: ['Asia/Ulaanbaatar'],
  ME: ['Europe/Podgorica'],
  MA: ['Africa/Casablanca'],
  MZ: ['Africa/Maputo'],
  MM: ['Asia/Yangon'],
  NA: ['Africa/Windhoek'],
  NR: ['Pacific/Nauru'],
  NP: ['Asia/Kathmandu'],
  NL: ['Europe/Amsterdam'],
  NZ: ['Pacific/Auckland', 'Pacific/Chatham'],
  NI: ['America/Managua'],
  NE: ['Africa/Niamey'],
  NG: ['Africa/Lagos'],
  MK: ['Europe/Skopje'],
  NO: ['Europe/Oslo'],
  OM: ['Asia/Muscat'],
  PK: ['Asia/Karachi'],
  PW: ['Pacific/Palau'],
  PS: ['Asia/Gaza', 'Asia/Hebron'],
  PA: ['America/Panama'],
  PG: ['Pacific/Port_Moresby'],
  PY: ['America/Asuncion'],
  PE: ['America/Lima'],
  PH: ['Asia/Manila'],
  PL: ['Europe/Warsaw'],
  PT: ['Europe/Lisbon', 'Atlantic/Azores'],
  PR: ['America/Puerto_Rico'],
  QA: ['Asia/Qatar'],
  RO: ['Europe/Bucharest'],
  RU: ['Europe/Moscow', 'Europe/Kaliningrad', 'Asia/Yekaterinburg', 'Asia/Novosibirsk', 'Asia/Krasnoyarsk', 'Asia/Irkutsk', 'Asia/Vladivostok', 'Asia/Kamchatka'],
  RW: ['Africa/Kigali'],
  KN: ['America/St_Kitts'],
  LC: ['America/St_Lucia'],
  VC: ['America/St_Vincent'],
  WS: ['Pacific/Apia'],
  SM: ['Europe/San_Marino'],
  ST: ['Africa/Sao_Tome'],
  SA: ['Asia/Riyadh'],
  SN: ['Africa/Dakar'],
  RS: ['Europe/Belgrade'],
  SC: ['Indian/Mahe'],
  SL: ['Africa/Freetown'],
  SG: ['Asia/Singapore'],
  SK: ['Europe/Bratislava'],
  SI: ['Europe/Ljubljana'],
  SB: ['Pacific/Guadalcanal'],
  SO: ['Africa/Mogadishu'],
  ZA: ['Africa/Johannesburg'],
  SS: ['Africa/Juba'],
  ES: ['Europe/Madrid', 'Atlantic/Canary'],
  LK: ['Asia/Colombo'],
  SD: ['Africa/Khartoum'],
  SR: ['America/Paramaribo'],
  SE: ['Europe/Stockholm'],
  CH: ['Europe/Zurich'],
  SY: ['Asia/Damascus'],
  TW: ['Asia/Taipei'],
  TJ: ['Asia/Dushanbe'],
  TZ: ['Africa/Dar_es_Salaam'],
  TH: ['Asia/Bangkok'],
  TL: ['Asia/Dili'],
  TG: ['Africa/Lome'],
  TO: ['Pacific/Tongatapu'],
  TT: ['America/Port_of_Spain'],
  TN: ['Africa/Tunis'],
  TR: ['Europe/Istanbul'],
  TM: ['Asia/Ashgabat'],
  TV: ['Pacific/Funafuti'],
  UG: ['Africa/Kampala'],
  UA: ['Europe/Kyiv'],
  AE: ['Asia/Dubai'],
  GB: ['Europe/London'],
  US: ['America/New_York', 'America/Chicago', 'America/Denver', 'America/Los_Angeles', 'America/Anchorage', 'Pacific/Honolulu', 'America/Phoenix'],
  UY: ['America/Montevideo'],
  UZ: ['Asia/Tashkent', 'Asia/Samarkand'],
  VU: ['Pacific/Efate'],
  VA: ['Europe/Vatican'],
  VE: ['America/Caracas'],
  VN: ['Asia/Ho_Chi_Minh'],
  YE: ['Asia/Aden'],
  ZM: ['Africa/Lusaka'],
  ZW: ['Africa/Harare'],
}

// ---------------------------------------------------------------------------
// Helpers
// ---------------------------------------------------------------------------

/** Detect the browser / system IANA timezone (e.g. "America/New_York") */
export function getSystemTimezone(): string {
  try {
    return Intl.DateTimeFormat().resolvedOptions().timeZone || ''
  } catch {
    return ''
  }
}

/** Get all IANA timezones supported by the runtime (fallback to country list if API missing) */
export function getAllTimezones(): string[] {
  try {
    if (typeof Intl !== 'undefined' && 'supportedValuesOf' in Intl) {
      return (Intl as any).supportedValuesOf('timeZone') as string[]
    }
  } catch { /* ignore */ }
  // Fallback: flatten all COUNTRY_TIMEZONES values
  const set = new Set<string>()
  for (const tzs of Object.values(COUNTRY_TIMEZONES)) {
    for (const tz of tzs) set.add(tz)
  }
  return Array.from(set).sort()
}

/** Get timezones for a specific country code, or all timezones if country is empty */
export function getTimezonesForCountry(countryCode: string): string[] {
  if (!countryCode) return getAllTimezones()
  return COUNTRY_TIMEZONES[countryCode] || getAllTimezones()
}

/** Format a timezone for display: "America/New_York" → "America/New York (UTC-05:00)" */
export function formatTimezoneLabel(tz: string): string {
  const display = tz.replace(/_/g, ' ')
  try {
    const now = new Date()
    const fmt = new Intl.DateTimeFormat('en-US', { timeZone: tz, timeZoneName: 'shortOffset' })
    const parts = fmt.formatToParts(now)
    const offset = parts.find((p) => p.type === 'timeZoneName')?.value || ''
    return offset ? `${display} (${offset})` : display
  } catch {
    return display
  }
}
